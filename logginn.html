<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Form</title>
</head>
<body>
    <section>
        <h1 style="text-align: center;">Logg inn med ID</h1>
        <form id="loginForm">
            <div class="input">
                <label for="loginEmail">E-post</label>
                <input type="email" id="loginEmail" name="email" required>
            </div>
            <div class="input">
                <label for="loginPassword">Passord</label>
                <input type="password" id="loginPassword" name="password" required>
            </div>
            <button type="submit">Logg inn</button>
        </form>
        <div class="register">
            <p>Har du ikke konto? <a href="./register.html">Registrer deg her</a></p>
        </div>
    </section>
    <p id="loginMessage"></p>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var style = document.createElement('style');
            style.innerHTML = `
                /* Legg til CSS-stiler her */
                body {
                    font-family: Arial, sans-serif;
                    background-color: black;
                    margin: 0;
                    padding: 0;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                    flex-direction: column; /* Legg til for midtstilling */
                }

                section {
                    background-color: yellow;
                    padding: 20px;
                    border-radius: 8px;
                    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                }

                .input {
                    margin-bottom: 10px;
                }

                label {
                    display: block;
                    margin-bottom: 5px;
                    font-weight: bold;
                }

                input[type="email"],
                input[type="password"] {
                    width: 100%;
                    padding: 10px;
                    border-radius: 5px;
                    border: 1px solid #ccc;
                    box-sizing: border-box;
                    font-size: 16px;
                }

                button[type="submit"] {
                    width: 100%;
                    padding: 10px;
                    background-color: #007bff;
                    color: #fff;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: background-color 0.3s ease;
                }

                button[type="submit"]:hover {
                    background-color: #0056b3;
                }

                .register {
                    text-align: center;
                    margin-top: 10px;
                }

                .register a {
                    color: #007bff;
                    text-decoration: none;
                }

                .register a:hover {
                    text-decoration: underline;
                }
            `;
            document.head.appendChild(style);
        });

        document.getElementById('loginForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
 
            fetch(`https://crudapi.co.uk/app/upLoad${encodeURIComponent(email)}`, {
                method: "GET",
                headers: {
                    "Authorization": "Bearer VQFEfp3J5JMFnluXgYW1bwJfB1orB2DSBIEd2I_dm9gNoK7RlA",
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json();
            })
            .then(responseData => {
                const user = responseData.items.find(user => user.email === email);
                if (user && user.password === password) { 
                    console.log('Login successful:', user);
                    alert('PÃ¥logget!');
                    location.href = 'players.html';
                } else {
                    throw new Error('E-post eller passord stemmer ikke');
                }
            })
            .catch(error => {
                console.error('Innlogging feilet:', error);
                alert('Innlogging feilet! ' + error.message);
            });
        });
    </script>
</body>
</html>
